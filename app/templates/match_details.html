// ... existing code ...
                // Filter datasets for home and away teams
                const homeDatasets = data.datasets.filter(dataset => 
                    dataset.label.includes("{{ event.home_team }}")
                ).map(dataset => ({
                    ...dataset,
                    data: dataset.data.map((value, index) => ({
                        x: data.labels[index],
                        y: value
                    }))
                }));

                const awayDatasets = data.datasets.filter(dataset => 
                    dataset.label.includes("{{ event.away_team }}")
                ).map(dataset => ({
                    ...dataset,
                    data: dataset.data.map((value, index) => ({
                        x: data.labels[index],
                        y: value
                    }))
                }));
                
                console.log("[DEBUG] Home datasets:", homeDatasets);
                console.log("[DEBUG] Away datasets:", awayDatasets);
                
                // Chart configuration
                const chartConfig = {
                    type: 'line',
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                type: 'time',
                                time: {
                                    unit: 'minute',
                                    displayFormats: {
                                        minute: 'HH:mm'
                                    }
                                },
                                title: {
                                    display: true,
                                    text: 'Time'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Odds'
                                },
                                beginAtZero: false,
                                ticks: {
                                    callback: function(value) {
                                        return value.toFixed(2);
                                    }
                                }
                            }
                        },
                        plugins: {
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                callbacks: {
                                    label: function(context) {
                                        return `${context.dataset.label}: ${context.parsed.y.toFixed(2)}`;
                                    }
                                }
                            },
                            legend: {
                                position: 'top',
                                labels: {
                                    font: {
                                        size: 12
                                    }
                                }
                            },
                            annotation: {
                                annotations: {
                                    currentTime: {
                                        type: 'line',
                                        xMin: new Date().toISOString(),
                                        xMax: new Date().toISOString(),
                                        borderColor: 'rgb(0, 128, 0)',
                                        borderWidth: 2,
                                        label: {
                                            content: 'Current Time',
                                            enabled: true,
                                            position: 'top'
                                        }
                                    },
                                    gameStart: {
                                        type: 'line',
                                        xMin: "{{ event.commence_time.isoformat() }}",
                                        xMax: "{{ event.commence_time.isoformat() }}",
                                        borderColor: 'rgb(255, 0, 0)',
                                        borderWidth: 2,
                                        label: {
                                            content: 'Game Start',
                                            enabled: true,
                                            position: 'top'
                                        }
                                    }
                                }
                            }
                        },
                        elements: {
                            point: {
                                radius: 6,
                                hoverRadius: 8,
                                backgroundColor: 'white',
                                borderWidth: 2
                            },
                            line: {
                                tension: 0
                            }
                        }
                    }
                };
                
                // Create or update home team chart
                const homeCtx = document.getElementById('homeOddsChart').getContext('2d');
                if (homeChart) {
                    homeChart.destroy();
                }
                homeChart = new Chart(homeCtx, {
                    ...chartConfig,
                    data: {
                        datasets: homeDatasets
                    }
                });
                
                // Create or update away team chart
                const awayCtx = document.getElementById('awayOddsChart').getContext('2d');
                if (awayChart) {
                    awayChart.destroy();
                }
                awayChart = new Chart(awayCtx, {
                    ...chartConfig,
                    data: {
                        datasets: awayDatasets
                    }
                });
// ... existing code ...
